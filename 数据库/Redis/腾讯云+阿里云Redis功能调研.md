# Redis发展趋势展望

## 腾讯云

### 简介

腾讯云数据库 Redis（TencentDB for Redis）是腾讯云打造的兼容 Redis 协议的缓存和存储服务。丰富的数据结构能帮助您完成不同类型的业务场景开发。支持主从热备，提供自动容灾切换、数据备份、故障迁移、实例监控、在线扩容、数据回档等全套的数据库服务。

### 特性

运维、容灾、监控、迁移工具

|特性|说明|
|---|---|
|托管部署|只需在管理控制台中单击几下，即可在几分钟内启动并连接到一个可以立即投入生产的 Redis 服务。不需要用户自己去安装、部署、运维，减少用户的人力开销。|
|数据保障机制|无需担心数据丢失，实例数据定时自动备份，提高数据可靠性。同时用户也可以手动进行数据备份，用户无需开发数据恢复系统来保证数据可靠性，极大地节省了用户的开发时间。|
|高性能|腾讯云专家对核心源代码进行了优化，超高的性能可以满足您绝大部分场景需求，用户无需额外开发高速缓存层，为用户节省大量开发时间|
|平滑扩展|当存储容量不足时，用户可以在 Web 端进行扩容操作，一键式扩容非常简便，扩容过程不影响用户的线上业务。|
|全面的日常监控|多达三十余项的专业数据指标的监控，如出入网流量监控、Set/Get 数、CPU 负载、QPS 等，可视化的数据展示一目了然。|
|自定义告警|可以自定义告警策略，当指标超过一定阈值时会自动告警，帮助用户提前预警风险，也能帮助用户快速定位和解决问题。|
|数据迁移|借助数据传输服务 DTS，可以将多种场景的源数据迁移到云数据库 Redis 中，极大简化您的数据库上云工作，无需手动迁移数据库，实现业务无缝过渡上云。|
|自动容灾|服务采用双机热备架构，主机故障后，服务秒级切换到备机，服务切换不影响线上业务，整个过程用户不需要做任何处理。|
|费用低廉|云数据库 Redis 部署在云端，极大节省了您前期搭建基础网络设施的成本和后期的维护成本。您可以根据使用场景灵活选择，为实际使用的计算资源付费。|

### 购买方式

1. 地区
1. 网络
1. 引擎(社区版/CKV)
1. 兼容版本(4.0/2.8)
1. 实例类型(标准版/集群版)
1. 分片容量
1. 分片数量
1. 副本数量
	- Redis 2.8 标准版支持0 - 1个副本。
	- Redis 4.0 标准版支持1 - 5个副本。
	- Redis 4.0 集群版支持1 - 5个副本。
1. 副本只读
1. 实例名
1. 密码

### 命令支持

#### 支持跨 Slot 访问的命令

- MGET
- MSET
- DEL

#### 不支持跨 Slot 执行的命令

- UNLINK
- EXISTS
- BRPOP
- BLPOP
- SINTER
- STNTERSTORE
- SUNION
- SDIFF
- SDIFFSTORE
- MSETNX
- PFCOUNT
- PFMERGE

#### 自定义命令列表：

- INFO
- MEMORY
- SLOWLOG
- FLUSHDB
- PING
- KEYS（支持 hashtag，优先匹配 hashtag）
- SCAN（支持 hashtag，优先匹配 hashtag）

### 资源分配方式

根据内存分配最大连接数及带宽

## 阿里云

### 简介

高可靠双机热备架构及可无缝扩展的集群架构，满足高读写性能场景及容量需弹性变配的业务需求。

### 特性

|特性|说明|
|---|---|
|架构灵活|单节点、双机热备、读写分离和分布式集群架构|
|数据安全|备份恢复，多层网络防护，灾备实例|
|弹性扩展|多维度无限扩容，升级对业务全透明|
|智能运维|专业监控和数据管理平台，主动升级|

### 单节点产品特点

|特点|说明|
|---|---|
|高可用|阿里自研HA系统实时探测服务健康状态，宕机后秒级拉起新Redis进程，保障服务高可用|
|高性能|最高支持10万QPS，最大支持2W连接数，最大内网带宽48M/s|
|高性价比|省去数据持久化或数据备份业务开销，每一分钱都用于打造完美缓存服务|
|高安全|VPC私有网络，DDOS防护，1000个以上IP 白名单配置，阿里云专家深度优化内核|
|丰富的产品形态|提供1G到32G多种产品规格，高配版支持对连接数和内网宽带进行定制升级|
|智能运维|可视化数据库管理平台及运维监控平台，运维省心省力；系统可主动升级至最新可靠版本|

### 单节点集群版特点

|特点|说明|
|---|---|
|产品特点及优势|统一暴露一个访问域名，用户访问该域名进行正常的 Redis 访问及操作，proxy 服务器、分片服务器和配置服务器均不提供域名访问，用户不可以直接连接访问对应操作。|
|存储及性能弹性扩容|支持TB级别存储空间，满足百万QPS读写访问，可灵活变配，且变配扩容对业务零影响，满足大容量存储、高性能要求场景。|
|专业监控及数据管理平台|提供CPU利用率、连接数、磁盘空间利用率等实例信息实时监控及报警，随时随地了解实例动态。可视化运维及数据管理平台，解放繁琐运维。|
|超高的安全性|VPC私有网络、IP白名单DDOS防护，多重网络安全防御机制，阿里云专家对Redis内核深度优化，有效抵御系统漏洞。|
|超高性价比|Redis 单节点集群版提供超高性价比，在数据容错性较低场景，无需使用主从集群版，且受惠于规模优势，性价比远超自建集群。|




### 产品重大更新

1. 云数据库 Redis 版 - 云数据库Redis支持不停服迁移数据
1. 云数据库 Redis 版 - 云数据库Redis新增多个可用区
1. 云数据库 Redis 版 - 云数据库Redis版推出小内存大QPS集群版配置（上调连接数及带宽）
1. 云数据库 Redis 版 - 云数据库Redis版（集群版）支持指定hashtag方式访问
1. 云数据库 Redis 版 - 云数据库Redis版集群实例支持备份实例
1. 云数据库 Redis 版 - 云数据库Redis主从版可升级至集群版本
1. 云数据库 Redis 版 - 香港多可用区上线
1. 云数据库 Redis 版 - 增加256M主备版本配置售卖
1. 云数据库 Redis 版 - 云数据库Redis单节点版正式售卖
1. 云数据库 Redis 版 - 云数据库Redis可用性指标对外展示
1. 云数据库 Redis 版 - 云数据库Redis支持IP白名单
1. 云数据库 Redis 版 - 单节点集群版支持
1. 云数据库 Redis 版 - 云数据库Redis版OPEN API、SDK全网开放
1. __云数据库 Redis 版 - 云数据库Redis支持热点key功能（？）__
1. __云数据库 Redis 版 - 云数据库Redis支持读写分离__
1. __云数据库 Redis 版 - Redis混合存储规格系列公测（2018.3.30 将部分冷数据存储到磁盘）__
1. 云数据库 Redis 版 - Redis集群版支持单副本变配双副本
1. 云数据库 Redis 版 - 云数据库Redis 4.0版本支持集群架构
1. 云数据库 Redis 版 - 云数据库Redis主从系列支持单副本变配双副本
1. 云数据库 Redis 版 - 云数据库Redis 集群版支持4T内存大规格
1. 云数据库 Redis 版 - 云数据库Redis 2.8版本支持VPC内免密登录
1. 云数据库 Redis 版 - 云数据库Redis\Memcache支持连接域名修改
1. __云数据库 Redis 版 - 云数据库Redis支持SSL链路加密功能__
1. 云数据库 Redis 版 - 云数据库缓存系列支持同城容灾（主备不同机房）
1. 云数据库 Redis 版 - 白名单支持覆盖更新
1. 云数据库 Redis 版 - redis 上线 64G 读写分离版
1. __云数据库 Redis 版 - 阿里云 Redis 混合存储版上线（2018.8.10）__
1. 云数据库 Redis 版 - Redis 集群版性能监控页面上线代理节点性能监控指标
1. 云数据库 Redis 版 - Redis 支持设置禁用命令
1. 云数据库 Redis 版 - Redis 上线账号管理功能（需要读写分离，只读权限管理客户）
1. __云数据库 Redis 版 - Redis 支持多活产品形态，支持动态追加删除多活实例子节点（子实例间通过CRDT（Conflict-free Replicated Data Type）机制检测并解决数据冲突，保障数据最终一致性）__
1. 云数据库 Redis 版 - Redis 上线集群版读写分离规格
1. 云数据库 Redis 版 - Redis 上线4.0版本读写分离规格
1. 云数据库 Redis 版 - Redis 控制台支持导出实例列表功能
1. 云数据库 Redis 版 - Redis 慢日志查询
1. 云数据库 Redis 版 - Redis 审计日志功能
1. 云数据库 Redis 版 - Redis 运行日志管理
1. 云数据库 Redis 版 - Redis 提供控制台实例重启功能
1. 云数据库 Redis 版 - Redis 提供内网带宽临时调整功能
1. 云数据库 Redis 版 - Redis 提供大 Key 缓存分析功能
1. 云数据库 Redis 版 - Redis 5.0 版本发布（Stream，短连接优化，动态HZ）
1. __云数据库 Redis 版 - Redis 发布性能增强版（网络IO线程优化版，QPS为社区版3倍）__
1. 云数据库 Redis 版 - 控制台支持实例标签功能

## 调研总结

结合腾讯云及阿里云的功能更新，对原生redis可做的改造主要有以下方向

|方向|功能|初步方案|
|---|---|---|
|运维|资源控制|memory usage key|
|高性能|支持热Key|支持多slot多Key合并运算|
||读写分离|readonly|
|高可用|平滑扩展|vip|
||异地多活|数据同步+CRDT|
|低成本|混合存储|proxy+淘汰程序+限制(如果改redis源码有维护成本，升级困难)|
|高安全|SSL链路加密|客户端+proxy|