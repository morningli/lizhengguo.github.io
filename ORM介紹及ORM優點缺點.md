# ORM介绍及ORM优点、缺点

[原文链接](http://blog.twbryce.com/what-is-orm/)

## ORM的概念

Object-Relational Mapping (ORM, O/RM, or O/R mapping)一词就是将关联式资料库映射至物件导向的资料抽象化技术。其理念是将资料库的内容映射为物件，让程式开发人员可以用操作物件的方式对资料库进行操作，而不直接使用SQL语法对资料库进行操作。让程式设计师不用管底层的资料库系统是哪种厂牌或哪个版本的资料库(如：SQL Server、Oracle、DB2、MySQL、Sybase、DBMaker…)，仅须用同一套语法撰写存取资料库的逻辑。当底层资料库的实作品变更时，由于程式设计师并不直接对资料库进行操作，因此程式内容几乎不用修改，也就是降低了物件导向程式与资料库之间的耦合关系

## 为什么要使用ORM

### 操作SQL语法的重复性

在ORM之前我们知道通过ADO.NET可以访问资料库。或者更进一步，学过三层架构的开发人员，知道可以将通过ADO.NET对资料库的操作提取到一个单独的类SqlHelper中，然后在DAL层调用SqlHelper类的方法实现对资料库的操作。即使你这样做了，在数据访问层(DAL)层，还是要写大量的代码，而且我们都知道对资料库的访问无非增、删、改、查四种操作，那么我们很容易想到我们做了大量的重复性工作。只是因为操作的表不同，我们可能需要花费大量的时间编写针对该表的增删改查语句，那么有没有一种方式能自动生成这些语句呢？这样的话，我们就可以吧主要的精力或者更多的时间投入到特殊业务的处理上。

### 大量SQL语句影响程序的扩展性和灵活性

我们知道之前我们编写的程序和资料库之间的耦合性很紧密，如果我们操作的是SQL Server资料库，我们就需要引入对应的类库(SqlConnection等)，这样如果需要更换资料库，那么，数据访问层的代码就需要重新书写。

在资料库中表现为关系数据，而在内存中表现为对象。应用程序处理对像很容易，但是很难处理关系数据。 ORM做到了关系数据和对像数据之间的映射，ORM可以通过映射关系自动产生SQL语句，ORM在业务逻辑层和数据层之间充当桥梁。

ORM核心原则：

1. 简单性
1. 传达性
1. 精确性

## ORM的优缺点

### 优点

1. 隐藏了数据访问细节，“封闭”的通用资料库交互，ORM的核心。他使​​得我们的通用数据交互变得简单易行，并且完全不用考虑该死的SQL语句。快速开发，由此而来。
2. ORM使用我们构造固化数据结构变得简单易行。
3. ORM可以防止SQL的注入攻击(SQL-Injection)
4. 面向对象不用编码，就可以向操作对像一样操作资料库
5. 提高开发效率，ORM可以自动对实体对象与资料库中表进行字段与属性的映射，不需要单独的数据访问层就可以数据进行增删改查。
6. 方便转移资料库，当资料库发生改变时，不需要对模型进行改动，只需要修改映射关系就可以了。

在ORM年表的史前时代，我们需要将我们的对像模型转化为一条条的SQL语句，通过直连或是DB helper在关系资料库构造我们的资料库体系。而现在，基本上所有的ORM框架都提供了通过对像模型关系资料库结构的功能

### 缺点

1. 无可避免的，自动化意味着映射和关联管理，代价是牺牲性能（早期，这是所有不喜欢ORM人的共同点）。现在的各种ORM框架都在尝试使用各种方法来减轻这块，效果还是很显著的。
2. 面向对象的查询语言作为一种资料库与对象之间的过渡，虽然隐藏了数据层面的业务抽象，但并不能完全的屏蔽掉资料库层的设计，并且无疑将半圆学习成本
3. 对于复杂查询，ORM仍然力不从心！虽然可以实现，但是不值的(在Laravel上曾有过这样的感触，结果最后还是要写raw sql)。视图和存储可以解决大部份问题